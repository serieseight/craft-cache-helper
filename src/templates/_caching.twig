{#
This template is injected below each Formie form. You can find the point it is injected in module.php at around line 233.

This piece of code helps define the structure of the form so that we can use javascript to pull cookies or query parameters
rather than relying on twig (which would be cached)
#}

<script>
	window.dynamicForms = window.dynamicForms || []
	window.dynamicForms.push({
		parent: document.currentScript.parentElement,
		fields: [
      {%- for field in form.getCustomFields() -%}
				{%- if field['defaultOption'] is defined -%}
				{
					handle: '{{ field.handle }}',
					type: '{{ field.defaultOption }}',
					{%- switch field.defaultOption -%}
						{%- case 'cookie' -%}
							cookieName: '{{ field.cookieName }}',

						{%- case 'query' -%}
							queryParam: '{{ field.queryParameter }}',
					{%- endswitch -%}
				},
				{%- endif -%}
      {%- endfor -%}
		]
	})
</script>